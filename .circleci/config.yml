version: 2.1

setup: true

orbs:
  continuation: circleci/continuation@0.1.2  # Usa el orb correcto

parameters:
  pipeline_config:
    type: string
    default: config_1.yml

workflows:
  setup:
    jobs:
      - continuation/continue:
          configuration_path: .circleci/<< pipeline.parameters.pipeline_config >>
jobs:
  trigger_pipeline:
    docker:
      - image: cimg/base:stable
    parameters:
      pipeline_config:
        type: string
    steps:
      - checkout
      - run:
          name: Verificar Archivos en .circleci/
          command: |
            echo "üîç Verificando archivos en .circleci/"
            ls -la .circleci/
      - run:
          name: Validar Configuraci√≥n
          command: |
            CONFIG_FILE=".circleci/<< parameters.pipeline_config >>"
            
            if [ -f "$CONFIG_FILE" ]; then
              echo "‚úÖ Archivo encontrado: $CONFIG_FILE"
              circleci config validate "$CONFIG_FILE"
            else
              echo "‚ùå ERROR: Archivo $CONFIG_FILE no encontrado"
              exit 1
            fi
      - continuation/continue:
          configuration_path: .circleci/<< parameters.pipeline_config >>
