version: 2.1

setup: true  # Pipeline din치mico habilitado

orbs:
  continuation: circleci/continuation@0.1.2  # Orb de continuaci칩n

parameters:
  pipeline_config:
    type: string
    default: config_1.yml  # Archivo por defecto

workflows:
  setup:
    jobs:
      - continuation/continue:
          configuration_path: .circleci/<< pipeline.parameters.pipeline_config >>

jobs:
  trigger_pipeline:
    docker:
      - image: cimg/base:stable
    parameters:
      pipeline_config:
        type: string
        default: config_1.yml
    steps:
      - checkout  # Descarga el c칩digo del repositorio
      - run:
          name: Verificar Archivos
          command: ls -la .circleci/  # Muestra archivos en .circleci
      - run:
          name: Validar Configuraci칩n
          command: |
            if [ -f ".circleci/<< parameters.pipeline_config >>" ]; then
              echo "Archivo encontrado: .circleci/<< parameters.pipeline_config >>"
              circleci config validate .circleci/<< parameters.pipeline_config >>
              circleci continuation continue -c .circleci/<< parameters.pipeline_config >>
            else
              echo "ERROR: Archivo .circleci/<< parameters.pipeline_config >> no encontrado"
              exit 1
            fi
